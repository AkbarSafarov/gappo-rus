{"version":3,"names":[],"mappings":"","sources":["functions.js"],"sourcesContent":["(function () {\n\t'use strict';\n\n\tif (!!window.templateFunctions) return;\n\n\t// Конструктор\n\twindow.templateFunctions = function (encParams) {\n\t\tif (!encParams)\n\t\t\treturn;\n\n\t\tconst self = this;\n\t\tconst params = JSON.parse(atob(encParams));\n\n\t\tif (typeof params === 'object') {\n\t\t\tthis.admin = typeof params.admin === 'boolean' ? params.admin : false;\n\t\t\tthis.ajaxPath = params.ajax_path || params.ajax_url || '/local/ajax/';\n\t\t\tthis.resolution = params.res ? Object.fromEntries(\n\t\t\t\tObject.entries(params.res).map(([key, value]) => {\n\t\t\t\t\treturn [key, parseInt(value, 10)];\n\t\t\t\t})\n\t\t\t) : { 'xs': 400, 'sm': 576, 'md': 768, 'lg': 992, 'xl': 1200, 'xxl': 1400, '3xl': 1920, '4xl': 2560 };\n\t\t\tthis.siteName = params.site_name || '';\n\t\t\tthis.sessid = params.sessid || null;\n\t\t\tthis.params = {\n\t\t\t\tlastScrollTop: 0,\n\t\t\t\tscrollTop: window.scrollY,\n\t\t\t\theader: null,\n\t\t\t\theaderHeight: null,\n\t\t\t\tonLoader: false,\n\t\t\t};\n\n\t\t\tdocument.addEventListener('DOMContentLoaded', this.init.bind(this));\n\n\n\t\t\tthis.defer(() => {\n\t\t\t\tif (typeof Fancybox != 'undefined')\n\t\t\t\t\tthis.fancybox();\n\t\t\t\tif (typeof LazyLoad != 'undefined')\n\t\t\t\t\tthis.lazyload();\n\t\t\t});\n\t\t}\n\t};\n\n\twindow.templateFunctions.prototype = {\n\t\tdefer: function (fn) {\n\t\t\tif (document.readyState === 'complete' || document.readyState === 'interactive')\n\t\t\t\tsetTimeout(fn, 0);\n\t\t\telse\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', fn);\n\t\t},\n\t\tinit: function () {\n\t\t\t// Инициализация\n\t\t},\n\n\n\t\tselectDropDown: function (e, popupId = null) {\n\t\t\tif (popupId === 'undefined' || popupId === undefined || popupId === null)\n\t\t\t\treturn;\n\n\t\t\tlet\n\t\t\t\tcontentNode = document.querySelector('[data-dropdown=\"' + popupId + '\"]'),\n\t\t\t\t_this = e;\n\n\t\t\tBX.PopupWindowManager.create(\"selectDrop-\" + popupId, e, {\n\t\t\t\tclassName: 'popup-select',\n\t\t\t\tminWidth: BX.width(e),\n\t\t\t\tautoHide: true,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\toffsetTop: 2,\n\t\t\t\toverlay: false,\n\t\t\t\tdraggable: { restrict: true },\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tcontent: BX(contentNode),\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\tif (!BX.hasClass(_this, '--selected'))\n\t\t\t\t\t\t\tBX.addClass(_this, '--selected');\n\t\t\t\t\t},\n\t\t\t\t\tonPopupAfterClose: () => {\n\t\t\t\t\t\tif (BX.hasClass(_this, '--selected'))\n\t\t\t\t\t\t\tBX.removeClass(_this, '--selected');\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}).show();\n\t\t},\n\n\t\t// defer loader\n\t\tfancybox: function () {\n\t\t\tFancybox.bind(\"[data-fancybox]\", {});\n\t\t\t// Fancybox.bind(\"[data-fb-form]\", {\n\t\t\t// \tmainClass: '--fb-form',\n\t\t\t// \ton: {\n\t\t\t// \t\tinit: e => {\n\n\t\t\t// \t\t},\n\t\t\t// \t\tclose: e => {\n\n\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// })\n\t\t},\n\n\t};\n\n})();\n\n\nif (typeof BX?.UI?.Notification === 'object') {\n\tfunction alertBalloonRenderer(balloon) {\n\t\tlet\n\t\t\tcontent = this.getContent(),\n\t\t\toptions = this.getData() || {},\n\t\t\ticon = options.icon || false,\n\t\t\tsize = options.size || '',\n\t\t\ttype = options.type || false,\n\t\t\twidth = this.getWidth(),\n\t\t\tcssClass = 'm-0 ui-alert';\n\n\t\tif (icon)\n\t\t\tcssClass += ' ui-alert-icon-' + icon;\n\t\tif (size)\n\t\t\tcssClass += ' ui-alert-' + size;\n\t\tif (type)\n\t\t\tcssClass += ' ui-alert-' + type;\n\n\t\treturn BX.create(\"div\", {\n\t\t\tprops: {\n\t\t\t\tclassName: cssClass\n\t\t\t},\n\t\t\tstyle: {\n\t\t\t\twidth: BX.type.isNumber(width) ? (width + \"px\") : width\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"span\", {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: \"ui-alert-message\"\n\t\t\t\t\t},\n\t\t\t\t\thtml: BX.type.isDomNode(content) ? null : content,\n\t\t\t\t\tchildren: BX.type.isDomNode(content) ? [content] : []\n\t\t\t\t}),\n\t\t\t\tBX.create(\"span\", {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: \"ui-alert-close-btn\"\n\t\t\t\t\t},\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: function () {\n\t\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t]\n\t\t})\n\t}\n}"],"file":"functions.js"}